<html>
<head>
	<title>Twitter Network Analytic</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<style type="text/css">
		header{
			color: #337AB7;
		}
		section{
			/*background-color: red;*/
		}
		aside{
			/*background-color: blue;*/
		}
		#canvas-force{
			/*background-color: yellow;*/
		}
		canvas{
			/*background-color: lime;*/
		    display: block;
		    margin: auto;
		}
		svg{
			/*background-color: lime;*/
		    display: block;
		    margin: auto;
		}
		footer{
			text-align: center;
		}
	</style>
</head>
<body>
<div class="container">
	<div class="container">
		<header class="row">
			<h3>Twitter Network Analytic</h3>
		</header>
		<main class="row">
			<section class="col-md-8">
				<div id="canvas-force"></div>
			</section>
			<aside class="col-md-4">
				<div class="row">
					<form class="form-inline" method="GET" action="/user">
						<fieldset class="form-group">
							<label class="sr-only">Analyze User</label>
							<input type="text" class="form-control" placeholder="Enter Username (without @)">
						</fieldset>
						<button type="submit" class="btn btn-primary">Analyze User</button>
					</form>
				</div>
				<div class="row">
					<form class="form-inline" method="GET" action="/topic">
						<fieldset class="form-group">
							<label class="sr-only">Analyze Topic</label>
							<input type="text" class="form-control" placeholder="Enter Topic Keyword">
						</fieldset>
						<button type="submit" class="btn btn-primary">Analyze Topic</button>
					</form>
				</div>
				<div class="row">
					<p>Feature :</p>
					<ul>
						<li>Analyze Twitter User Graph by Mention</li>
						<li>Analyze Twitter Topic by User Tweet</li>
					</ul>
				</div>

			</aside>
		</main>
		<footer class="row">
			&copy; 2017 Drizzer Tech 
		</footer>
	</div>
</div>
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script>
    // Figure width and height
    var width = 400,
        height = 500;

    // Number of Nodes
    var nNodes = 250,
        createLink = false;

    // Dataset Structure
    var data = {nodes: [], links: []};

    // Iterate in the nodes
    for (var k = 0; k < nNodes; k += 1) {
        // Create a node with a random radius.
        data.nodes.push({radius: Math.random() > 0.3 ? 2 : 4});

        // Create random links to the node.
        for (var j = k + 1; j < nNodes; j += 1) {

            // Only create links if the indexes are closer, with probability 0.1
            createLink = (Math.random() < 0.1) && (Math.abs(k - j) < 8);

            if (createLink) {
                // Append a link with variable distance between the nodes.
                data.links.push({
                    source: k,
                    target: j,
                    dist: 2 * Math.abs(k - j) + 10
                });
            }
        }
    }

    // Create and configure the force layout
    var force = d3.layout.force()
        .size([width, height])
        .nodes(data.nodes)
        .charge(function(d) { return -1.2 * d.radius * d.radius; })
        .linkDistance(function(d) { return d.dist; })
        .links(data.links)
        .start();

    // Create a canvas element and set its size.
    var canvas = d3.select('div#canvas-force').append('canvas')
        .attr('width', width + 'px')
        .attr('height', height + 'px')
        // .style('background-color', 'silver')
        .node();

    // Get the canvas context.
    var context = canvas.getContext('2d');

    force.on('tick', function() {
        // Clear the complete figure.
        context.clearRect(0, 0, width, height);

        // Draw the links
        data.links.forEach(function(d) {
            // Draw a line from source to target
            context.beginPath();
            context.moveTo(d.source.x, d.source.y);
            context.lineTo(d.target.x, d.target.y);
            context.stroke();
        });

        // Draw the nodes
        data.nodes.forEach(function(d, i) {
            // Draws a complete arc for each node.
            context.beginPath();
            context.arc(d.x, d.y, d.radius, 0, 2 * Math.PI, true);
            context.fill();
        });
    });
</script>
</body>
</html>